# ===========================================
# ChatGPT Web - Backend Environment Template
# ===========================================
#
# Source of truth:
# - apps/api/.env.example
# - packages/docs/setup/environment-configuration.md
#
# Copy this file to apps/api/.env and set values.
#
# ===========================================

# ===========================================
# Provider and Model Selection
# ===========================================

# AI provider: openai (default) or azure
AI_PROVIDER=openai

# Preferred default model variable
DEFAULT_MODEL=gpt-5.1

# Compatibility alias still used by legacy code paths
OPENAI_API_MODEL=gpt-5.1

# ===========================================
# OpenAI Configuration (AI_PROVIDER=openai)
# ===========================================

# Required when AI_PROVIDER=openai
OPENAI_API_KEY=

# Optional: custom base URL
OPENAI_API_BASE_URL=https://api.openai.com

# Optional: allow OpenAI-compatible third-party domains (openai provider only)
# true/1/yes/on to skip strict OPENAI_API_BASE_URL domain and key-format checks
SKIP_API_DOMAIN_CHECK=false

# Optional: disable debug logs
OPENAI_API_DISABLE_DEBUG=

# Optional: organization ID
OPENAI_ORGANIZATION=

# ===========================================
# Azure OpenAI Configuration (AI_PROVIDER=azure)
# ===========================================

# Required when AI_PROVIDER=azure
AZURE_OPENAI_API_KEY=
AZURE_OPENAI_ENDPOINT=
AZURE_OPENAI_DEPLOYMENT=

# Optional
AZURE_OPENAI_API_VERSION=2024-02-15-preview
AZURE_OPENAI_USE_RESPONSES_API=true

# ===========================================
# Security and Access Control
# ===========================================

# Optional: simple access password
AUTH_SECRET_KEY=

# Strongly recommended in production
SESSION_SECRET=

# Requests per hour per IP
MAX_REQUEST_PER_HOUR=100

# CORS allowlist (recommended in production)
ALLOWED_ORIGINS=

# Alias for ALLOWED_ORIGINS (both are supported)
CORS_ORIGIN=

# Allow credentials in CORS responses
CORS_CREDENTIALS=true

# Production HTTPS flag used by security validation
HTTPS=

# Optional Redis session store
REDIS_URL=
REDIS_PASSWORD=

# Provider-config compatibility flags
ENABLE_RATE_LIMIT=true
RATE_LIMIT_WINDOW_MS=3600000
RATE_LIMIT_MAX_REQUESTS=100
ENABLE_CSP=true
ENABLE_HSTS=true
API_KEY_HEADER=authorization
ENABLE_REASONING_MODELS=true
ENABLE_REASONING=true

# ===========================================
# Server and Logging
# ===========================================

NODE_ENV=production
LOG_LEVEL=info
PORT=3002
HOST=0.0.0.0

# Provider-config development flags
DEBUG=
HOT_RELOAD=

# ===========================================
# Network / Proxy
# ===========================================

SOCKS_PROXY_HOST=
SOCKS_PROXY_PORT=
SOCKS_PROXY_USERNAME=
SOCKS_PROXY_PASSWORD=

HTTPS_PROXY=
ALL_PROXY=

# ===========================================
# Migration Notice (Do Not Use)
# ===========================================
#
# The following variables are NO LONGER SUPPORTED:
# - OPENAI_ACCESS_TOKEN
# - API_REVERSE_PROXY
# - CHATGPT_ACCESS_TOKEN
# - REVERSE_PROXY_URL
#
# Use OPENAI_API_KEY (and Azure variables) instead.
# ===========================================
